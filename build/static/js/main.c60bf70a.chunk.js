(this["webpackJsonpchat-boat"]=this["webpackJsonpchat-boat"]||[]).push([[0],{39:function(e,t,n){},40:function(e,t,n){},44:function(e,t,n){},45:function(e,t,n){},75:function(e,t,n){"use strict";n.r(t);var s=n(0),c=(n(39),n(40),n(14)),a=n.n(c),i=n(79),o=n(35),r=n(5),l=(n(44),n(13)),j=n(15),u=n(20),m=n(37),d=n(17),b=(n(45),n(23)),O=n.n(b),h=n(2);var x=function(){var e=Object(s.useState)(!1),t=Object(j.a)(e,2),n=t[0],c=t[1],a=Object(s.useState)([]),i=Object(j.a)(a,2),o=i[0],r=i[1],b=Object(s.useState)(""),x=Object(j.a)(b,2),p=x[0],g=x[1],f=Object(s.useState)(null),v=Object(j.a)(f,2),N=v[0],w=v[1],y=Object(s.useRef)(null),B=Object(s.useState)(""),S=Object(j.a)(B,2),k=(S[0],S[1],Object(s.useState)(!1)),T=Object(j.a)(k,2),C=T[0],q=T[1],D=function(){c(!1),r([]),w(null)},L=function(e,t){var n={text:t,isBot:!1,timestamp:(new Date).toLocaleTimeString()};r((function(e){return[].concat(Object(l.a)(e),[n])}));var s={text:"Typing...",isBot:!0,timestamp:(new Date).toLocaleTimeString()};r((function(e){return[].concat(Object(l.a)(e),[s])})),setTimeout((function(){var t={text:e,isBot:!0,timestamp:(new Date).toLocaleTimeString()};r((function(e){var n=e.findIndex((function(e){return"Typing..."===e.text}));return-1!==n?[].concat(Object(l.a)(e.slice(0,n)),[t],Object(l.a)(e.slice(n+1))):e}))}),2e3)},E=function(){if(""!==p.trim()){var e={text:p,isBot:!1,timestamp:(new Date).toLocaleTimeString()},t=[].concat(Object(l.a)(o),[e]);r(t),g("");var n=[].concat(Object(l.a)(t),[C]);q(!0),setTimeout((function(){q(!1),O.a.post("http://localhost:9090/get",{question:p}).then((function(e){var t=e.data;A();var s={text:t.Botresponse,isBot:!0,timestamp:(new Date).toLocaleTimeString()},c=Array.isArray(t.Options)?t.Options.map((function(e){return{text:e.question,isBot:!0,isOption:!0,onClick:function(){return L(e.answer,e.question)}}})):[],a=[].concat(Object(l.a)(n.slice(0,-1)),[s],Object(l.a)(c));r(a)})).catch((function(e){console.error("Error sending message:",e)})),w(null)}),2e3),A()}},A=function(){y.current&&(y.current.scrollTop=y.current.scrollHeight)};return Object(s.useEffect)((function(){A()}),[o]),Object(h.jsxs)("div",{className:"icon",children:[Object(h.jsx)(m.a,{onClick:n?D:function(){c(!0),O.a.post("http://localhost:9090/get",{question:p}).then((function(e){var t=e.data;console.log(t.job,"botResponse");var n={text:t.Botresponse,isBot:!0};console.log(n,"botResponseMessage");var s=Array.isArray(t.Options)?t.Options.map((function(e){var n={text:e.question,isBot:!0,isOption:!0};return e.answer?n.onClick=function(){return L(e.answer,e.question)}:t.answer&&(n.onClick=function(){return L(t.answer,e.question)}),n})):[],c=[n].concat(Object(l.a)(s));r(c)})).catch((function(e){console.error("Error sending message:",e)}))},style:{backgroundColor:"#f05454"},children:Object(h.jsx)("i",{children:n?Object(h.jsx)(u.a,{}):Object(h.jsx)(u.b,{})})}),Object(h.jsxs)(d.a,{show:n,onHide:D,children:[Object(h.jsx)(d.a.Header,{closeButton:!0,children:Object(h.jsx)(d.a.Title,{className:"title",children:"BotChat"})}),Object(h.jsxs)(d.a.Body,{children:[Object(h.jsxs)("div",{className:"chat-messages",ref:y,children:[null===o||void 0===o?void 0:o.map((function(e,t){return Object(h.jsxs)("div",{className:"chat-message ".concat(e.isBot?"left":"right"," ").concat(e.isOption?"option-message":""),onClick:e.isOption?e.onClick:null,children:[Object(h.jsx)("div",{className:"message-content",children:Object(h.jsx)("div",{className:"message-text",children:e.text})}),!e.isOption&&Object(h.jsx)("div",{className:"message-timestamp",children:(new Date).toLocaleString("en-US",{hour:"numeric",minute:"numeric",hour12:!0})})]},t)})),N&&Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)("div",{className:"chat-message right",children:Object(h.jsx)("div",{className:"message-content",children:Object(h.jsx)("div",{className:"message-text",children:N.question})})}),Object(h.jsx)("div",{className:"message-timestamp",children:(new Date).toLocaleString("en-US",{hour:"numeric",minute:"numeric",hour12:!0})}),Object(h.jsx)("div",{className:"chat-message left",children:Object(h.jsx)("div",{className:"message-content",children:Object(h.jsx)("div",{className:"message-text",children:N.answer})})}),N.options&&N.options.map((function(e,t){return Object(h.jsx)("div",{className:"chat-message left option-message",onClick:e.onClick,children:Object(h.jsx)("div",{className:"message-content",children:Object(h.jsx)("div",{className:"message-text",children:e.question})})},t)}))]})]}),C?Object(h.jsxs)("div",{className:"dot-loader",children:[Object(h.jsx)("p",{children:"Typing"}),Object(h.jsx)("div",{className:"dot"}),Object(h.jsx)("div",{className:"dot"}),Object(h.jsx)("div",{className:"dot"})]}):null]}),Object(h.jsxs)("div",{className:"chat-input",children:[Object(h.jsx)("input",{className:"input",type:"text",placeholder:"Type your message...",value:p,onChange:function(e){return g(e.target.value)},onKeyPress:function(e){"Enter"===e.key&&E()},disabled:C}),Object(h.jsx)("button",{className:"send-button",onClick:E,disabled:C,children:Object(h.jsx)(u.c,{size:"1.7em"})})]})]})]})},p=function(){return Object(h.jsx)(o.a,{children:Object(h.jsx)("main",{className:".bg-light",children:Object(h.jsx)(i.a,{children:Object(h.jsx)("div",{className:"bot",children:Object(h.jsx)(r.a,{path:"/",component:x,exact:!0})})})})})};a.a.render(Object(h.jsx)(p,{}),document.getElementById("root"))}},[[75,1,2]]]);
//# sourceMappingURL=main.c60bf70a.chunk.js.map